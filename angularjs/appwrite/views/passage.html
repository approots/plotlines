

<h2>
    {{story.title}}
    <small ng-show="story.description">
        {{story.description}}
    </small>
</h2>


<div class="row">
    <div class="span6">

        <div ng-show="! isEditPassage">
            <h2>
                <a href="" class="btn btn-primary" ng-click="deletePassage()"><i class="icon-remove icon-white"></i></a>
                <a href="" class="btn btn-primary" ng-click="isEditPassage = true"><i class="icon-pencil icon-white"></i></a>
                {{passage.title}}
            </h2>
            {{passage.passage}}
        </div>

        <div ng-show="isEditPassage">
            <h3>Edit Passage</h3>

            <!--<div class="alert alert-success" ng-show="storyCreated"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Your story was created.</strong> Would you like to <a href="" ng-click=""><strong>begin writing</strong></a>?</div> -->

            <form novalidate name="passageForm" class="passage-form" ng-submit="savePassage()">
                <fieldset>
                    <label class="control-label" for="inputPassageTitle">Title</label>

                    <input type="text" class="input-error span5" ng-model="passage.title" required name="inputPassageTitle" id="inputPassageTitle" placeholder="Unique Title">
                    <span class="text-error" ng-show="passageForm.inputPassageTitle.$error.required && passageForm.inputPassageTitle.$dirty">Required</span>
                    <!-- <span class="text-error" ng-show="passageForm.inputPassageTitle.$error.unique && passageForm.inputPassageTitle.$dirty">A similar title exists.</span> -->

                    <label class="control-label" for="textareaPassageText">Text</label>
                    <textarea class="span5" rows="12" id="textareaPassageText" ng-model="passage.passage" placeholder=""></textarea>

                    <br/>
                    <!--<label class="control-label" for="submitStory"></label>-->
                    <button name="submitPassage" id="submitPassage" type="submit" ng-disabled="passageForm.$invalid || isUnchangedPassage()" class="btn btn-primary">Edit</button>
                    <button type="button" ng-click="resetPassage()" ng-disabled="isUnchangedPassage()" class="btn">Reset</button>
                    <button type="button" ng-click="isEditPassage=false;resetPassage()" class="btn">Cancel</button>
                </fieldset>
            </form>
        </div>
    </div>

    <div class="span6">
        <div ng-show="passages.length">

            <h3>Passages</h3>

            <form class="form-horizontal">
                <input type="text" ng-model="searchText" placeholder="Search">
            </form>

            <table class="table table-striped">
                <thead>
                <tr>
                    <th><a href="" ng-click="predicate = 'title'; reverse=!reverse">Title</a></th>
                    <th><a href="" ng-click="predicate = 'text'; reverse=!reverse">Text</a></th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="passage in passages | orderBy:predicate:reverse | filter:searchText">
                    <td>{{passage.title}}</td>
                    <td>{{passage.text | cut:true:20}}</td>
                    <td><a href="#/stories/{{story.id}}/passages/{{passage.id}}" class="btn btn-primary"><i class="icon-pencil icon-white"></i></a></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
